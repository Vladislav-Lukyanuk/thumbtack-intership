Задание 6

Распакуйте архив “Задание 6.zip” в ваш рабочий каталог.  В Вашем проекте после этого должны появиться классы TestCircle,  TestCylinder,  TestFigure, TestRectangle, TestRectangle3D, TestTriangle  в каталоге test в пакете net.thumbtack.school.figures.v3, класс TestColor в каталоге test в пакете net.thumbtack.school.colors и класс TestCar  в каталоге test в пакете net.thumbtack.school.cars .

На этом занятии мы создадим третью версию наших классов геометрии, а также добавим еще один класс. 
Создайте пакет net.thumbtack.school.figures.v3 и скопируйте в него  все классы  из пакета net.thumbtack.school.figures.v2. Не забудьте изменить в каждом классе package!

Создайте в пакете net.thumbtack.school.figures.v3 enum Color со следующими значениями (в указанном порядке)

RED
GREEN
BLUE

Измените Ваши классы геометрии таким образом, чтобы вместо целого числа цвет задавался одним из значений этого enum. Для этого измените интерфейс Colored, методы в нем теперь должны выглядеть так

void setColor(Color color);
Устанавливает цвет фигуры

Color getColor();
Возвращает цвет фигуры

Измените все конструкторы, заменив в них int color на Color color

Создайте пакет net.thumbtack.school.cars и в нем класс Car (автомобиль). Автомобиль тоже может быть покрашен, поэтому он должен имплементировать интерфейс Colored. Реализуйте в нем также конструктор и методы

public Car (String model, int weight, int maxSpeed, Color color)
Создает автомобиль указанной модели, веса (в килограммах), максимальной скорости и цвета.  

public String getModel();
	Возвращает модель автомобиля.

public void setModel(String model);
	Устанавливает модель автомобиля.

public int getWeight();
	Возвращает вес автомобиля.

public void setWeight(int weight);
	Устанавливает вес автомобиля.

public int getMaxSpeed();
	Возвращает максимальную скорость автомобиля.

public void setMaxSpeed(int maxSpeed);
	Устанавливает максимальную скорость автомобиля.

Теперь становится ясно, что enum Color и интерфейс Colored находятся не в том пакете, где им следовало бы быть. В самом деле, окрашенными могут быть как фигуры, так и автомобили (а также многие другие объекты, которые со временем, возможно, придется создать). Поэтому создайте новый пакет net.thumbtack.school.colors и переместите enum Color и интерфейс Colored туда.

Разработанный код позволяет создавать окрашенные объекты и перекрашивать их, используя одну из констант из enum Color. Было бы неплохо, если бы можно было делать то же самое, задавая цвет просто в виде текстовой строки. Ясно, что для этого годится не любая текстовая строка, а только такая строка, которая является текстовым представлением одной из констант из enum Color. Например, строка “RED” годится, а “YELLOW” - нет, так как такого цвета у нас в enum Color сейчас нет.  Недопустимо также передавать null вместо этой строки.

Кроме того, теперь у нас возникает еще одна проблема - везде, где передается Color, можно передать null. В нашем задании мы не будем разрешать это, хотя в других случаях это может быть допустимым.

Если цвет указывается неправильно (любым из этих способов), объект не должен создаваться, вместо этого должно выбрасываться исключение. В экземпляре выброшенного исключения надо сохранить информацию о том, что именно было неправильно задано.

Для решения этой задачи создайте в пакете в пакете net.thumbtack.school.colors новый 

enum ColorErrorCode

с двумя значениями : WRONG_COLOR_STRING и NULL_COLOR.
В этом enum создайте текстовое поле errorString - понятное для человека описание ошибки  и следующие конструктор и методы : конструктор, принимающий текстовую строку и записывающий ее в поле errorString  и геттер для errorString. Обращаем внимание, что атрибут public для этого конструктора ставить нельзя!

Теперь создайте класс ColorException (наследник от класса Exception) - класс исключения, экземпляр которого должен выбрасываться при невозможности преобразовать текстовую строку в enum Color или если в качестве Color или String передается null. В этом классе должно быть поле типа enum ColorErrorCode, конструктор, принимающий enum ColorErrorCode и геттер (getErrorCode) для него. Разместите этот класс также в пакете net.thumbtack.school.colors.

Добавьте в enum Color метод, возвращающий Color по переданной текстовой строке. Если передается недопустимая строка, метод выбрасывает ColorException.

public static Color colorFromString(String colorString) throws ColorException;


Добавьте к интерфейсу Colored метод, позволяющий установить цвет по текстовой строке. Если передается недопустимая строка, метод выбрасывает ColorException.

void setColor(String colorString) throws ColorException;

Добавьте к каждому классу “цветных объектов” конструкторы, в которых вместо Color передается String. При передаче недопустимых значений выбрасывайте ColorException. Добавьте аналогичный метод в класс CircleFactory. Не дублируйте код - вызывайте в новых конструкторах и методах уже существующие конструкторы и методы. 

У наших классов геометрии есть еще одно общее свойство - для всех них имеет смысл понятие площади. Оно имеет смысл не только для данного набора классов, но и для других классов , которые, возможно, будут когда-то созданы. Поэтому давайте создадим еще один интерфейс HasArea. Создадим для этого пакет  net.thumbtack.school.area и в нем интерфейс с этим именем и одним методом

double getArea()

	и сделаем наши классы имплементирующими этот интерфейс.


Теперь запустите тесты с плагином Coverage , и определите, какие методы из разработанных классов не покрыты тестами. Добавьте в тестовые классы дополнительные тесты, проверяющие работу этих методов. Проверять работу метода hashCode не надо.

Примечание. При запуске тестов с Coverage , если у Вас Windows и имя каталога профиля (то есть Вашего каталога в C:\Users) содержит русские буквы, возможно исключение ArrayIndexOutOfBoundsException в самом плагине Coverage. В этом случае нужно 

Добавить строку
-Djava.io.tmpdir=C:\Temp 
в файлах idea.exe.vmoptions и idea64.exe.vmoptions (файлы находятся в "C:\Program Files\JetBrains\IntelliJ IDEA Community Edition 201x.y\bin"\)

Убедиться, что каталог C:\Temp существует и доступен для записи
Перезапустить IDEA


Проверьте работу тестов в консольном окне, запишите все классы на сервер (не забудьте изменить текст сообщения в git commit!) и убедитесь, что на сервере все тесты также проходят успешно (см. Занятие 1, п.15-19)


